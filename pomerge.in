#!/usr/bin/env bash

. _PREFIX_/share/kde-l10n-scripts/common.sh

echo "Updating all repositories"
svn up "${KDE_REPO}"/{trunk,branches/stable}/l10n-kde4/{scripts,templates,${KDE_LANG}} "${KDEREPO}"/trunk/l10n-support/{pology,scripts,templates,${KDE_LANG}} || exit 1

pushd "${KDE_REPO}"/trunk/l10n-support > /dev/null || exit 1

echo "Merging all data to summit repository"
posummit scripts/messages.summit ${KDE_LANG} merge || exit 1
posummit scripts/docmessages.summit ${KDE_LANG} merge || exit 1

echo "Commiting in all the changes"
svn ci -m "Update of Summit" || exit 1

popd > /dev/null || exit 1
